<!--
 * @Copyright: 微信公众号---嵌入式ARM
 * @File name: 嵌入式系统基础知识
 * @Description: 
 * @Author: yangjam
 * @Version: demo
 * @Date: 2020-07-26 13:27:34
 * @History: 修改历史列表，每条修改记录应包括修改日期、修改者及修改内容简述
 * @LastEditTime: 2020-07-26 17:20:04
--> 
# 嵌入式系统基础
1. 嵌入式系统定义
   * 定义：以应用为中心，以计算机技术为基础，软硬件可裁剪，适应应用系统对功能、可靠性、成本、体积、功耗严格要求的专用计算机系统
   * 发展阶段：无操作系统阶段、简单操作系统阶段、实时操作系统阶段、面向internet阶段
   * 知识产权核(IP核)：具有知识产权的、功能具体、接口规范、可在多个集成电路设计中重复使用的功能模块，是实现系统芯片(SOC)的基本构件
   * IP核模块有行为、结构和物理3级不同程度的设计，对应描述功能行为的不同可以分为三类：软核、固核、硬核
2. 嵌入式系统的组成
   * 包括硬件层、中间层、系统软件层和应用层软件层
   1. 硬件层：嵌入式微处理器、存储器、通用设备接口和I/O接口
        * 嵌入式核心模块=微处理器+电源电路+时钟电路+存储器
        * cache：位与主存和嵌入式微处理器内核之间，存放的是最近一段时间微处理器使用最多的程序代码和数据。它的主要目标是减小存储器给微处理器内核造成的存储器访问瓶颈，使处理速度更快
   2. 中间层(也称为硬件抽象层HAL或者板级支持包BSP)
        * 它将系统上层软件和底层硬件分离开，使系统上层软件开发人员无需关心底层硬件的具体情况，根据BSP层提供的接口开发即可
        * BSP有两个特点：硬件相关性和操作系统相关性
        * 设计一个完整的BSP需要完成两部分工作
            * 嵌入式系统的硬件初始化和BSP功能
              * 片级初始化：纯硬件的初始化过程，把嵌入式微处理器从上电的默认状态逐步设置成系统所要求的工作状态
              * 板级初始化：包含软硬件两部分在内的初始化过程，为随后的系统初始化和应用程序建立软硬件的运行环境
              * 系统初始化：以软件为主的初始化过程，进行操作系统的初始化
            * 设计硬件相关的设备驱动
   3. 系统软件层：由RTOS、文件系统、GUI、网络系统及通用组件模块组成
   4. 应用软件：有基于实时系统开发的应用程序组成
3. 实时系统
   * 定义：能在指定或确定的时间内完成系统功能和对外部或内部、同步或异步时间做出响应的系统
   * 区别：通用系统一般追求的是系统的平均响应时间和用户的使用方便；而实时系统主要考虑的是在最坏情况下的系统行为
   * 特点：时间约束性、可预测性、可靠性、与外部环境的交互性
   * 硬实时(强实时)：指应用的时间需求应能够得到完全满足，否则就造成重大安全事故，甚至造成重大的生命财产损失和生态破坏，如航天、军事
   * 软实时(弱实时)：指某些应用虽然提出了时间要求，但实时任务偶尔违反这种需求对系统运行及环境不会造成严重影响，如监控系统、实时信息采集系统
   * 任务的约束包括：时间约束、资源约束、执行顺序约束和性能约束
4. 实时系统的调度
   * 调度：给定一组实时任务和系统资源，确定每个任务何时何地执行的整个过程
   * 抢占式调度：通常是优先级驱动的调度，如ucos。优点是实时性好，反应快，调度算法相对简单，可以保证高优先级任务的时间约束；缺点是上下文切换多
   * 非抢占式调度：通常是按时间片分配的调度，不允许任务在执行期间被中断，任务一旦占用处理器就必须执行完毕或自愿放弃，如winCE。优点是上下文切换少，缺点是处理器有效资源利用率低，可调度性不好
   * 静态表驱动策略：系统在运行前根据各任务的时间约束及关联关系，采用某种搜索策略生成一张运行时刻表，指明各任务的起始运行时刻及运行时间
   * 优先级驱动策略：按照任务优先级的高低确定任务的执行顺序
   * 实时任务分类：周期任务、偶发任务、非周期任务
   * 实时系统的通用结构模型：数据采集任务实现传感器数据的采集、数据处理任务处理采集的数据、并将加工后的数据送到执行机构管理任务控制机构执行
5. 嵌入式微处理器体系的结构
   * 冯诺依曼结构：程序和数据公用一个存储空间，程序指令存储地址和数据存储地址指向同一个存储器的不同物理位置，采用单一的地址和数据总线，程序和数据的宽度相同。如：8086、ARM7、MIPS
   * 哈佛结构：程序和数据是两个相互独立的存储器，每个存储器独立编址、独立访问，是一种将程序和数据存储分开的存储结构。如：AVR、ARM9、ARM10
   * 计算机执行程序时间计算：$P=I\times CPI\times T$
     * I：高级语言程序编译后在机器声运行的指令数
     * CPI：为执行每条指令所需要的平均周期数
     * T：每个机器周期的时间
   * 流水线思想：在cpu中把每一条指令的串行执行过程变为若干条指令的子过程在cpu中重叠执行
   * 流水线的指标
     * 吞吐率：单位时间里流水线处理机流出的结果数。如果流水线的子过程所用时间不一样长，则吞吐率为最长子过程的倒数
     * 建立时间：流水线开始工作到达最大吞吐率的时间。若m个子过程所用时间一样，均为t，则建立时间$T=mt$
   * 信息存储的字节顺序
     * 存储器单位：字节(8bit)
     * 字长决定了微处理器的寻址能力，即虚拟地址空间的大小
     * 32位微处理器的的虚拟地址空间为$2^{32}*8$bit，即4GB
     * 小端字节顺序：低字节处于内存低地址处，高字节处于内存高地址处
     * 大端字节顺序：高字节在内存低地址处，低字节在内存高地址处
     * 网络设备的存储顺序问题取决于OSI模型底层中的数据链路层